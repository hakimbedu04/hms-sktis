@*<script type="text/javascript">
    if (typeof $ === 'undefined') {
        alert('JQuery must be loaded before TinyMCE!');
    }
</script>*@

<script src="@Url.Content("~/Scripts/vendors/tinymce/jquery.tinymce.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    var roxyFileman = '@Url.Content("~/Scripts/vendors/fileman/index.html?integration=tinymce4")';
    (function () {
        $(function () {
            $('#@ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty)').tinymce({
                script_url: '@Url.Content("~/Scripts/vendors/tinymce/tinymce.js")',
                theme: "modern",
                height: 500,
                width: '100%',
                menubar: false,
                toolbar: "undo redo | styleselect | bold italic underline | alignleft aligncenter alignright alignjustify",
                //plugins: [
                //    "advlist autolink lists link image charmap print preview hr anchor pagebreak",
                //    "searchreplace wordcount visualblocks visualchars code fullscreen",
                //    "insertdatetime media nonbreaking save table contextmenu directionality",
                //    "emoticons template paste textcolor"
                //],
                //toolbar1: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
                //toolbar2: "print preview media | forecolor backcolor emoticons",
                //file_browser_callback: RoxyFileBrowser,
                relative_urls: false,
                remove_script_host: false,
                convert_urls: false,
                image_advtab: true,
                templates: [
                    { title: 'Test template 1', content: 'Test 1' },
                    { title: 'Test template 2', content: 'Test 2' }
                ]
            });
        });

        //function RoxyFileBrowser(field_name, url, type, win) {
        //    var cmsURL = roxyFileman;  // script URL - use an absolute path!
        //    if (cmsURL.indexOf("?") < 0) {
        //        cmsURL = cmsURL + "?type=" + type;
        //    }
        //    else {
        //        cmsURL = cmsURL + "&type=" + type;
        //    }
        //    cmsURL += '&input=' + field_name + '&value=' + document.getElementById(field_name).value;
        //    tinyMCE.activeEditor.windowManager.open({
        //        file: cmsURL,
        //        title: 'Roxy File Browser',
        //        width: 850, // Your dimensions may differ - toy around with them!
        //        height: 650,
        //        resizable: "yes",
        //        plugins: "media",
        //        inline: "yes", // This parameter only has an effect if you use the inlinepopups plugin!
        //        close_previous: "no"
        //    }, {
        //        window: win,
        //        input: field_name
        //    });
        //    return false;
        //}
    })();
</script>

@Html.TextArea(string.Empty, ViewData.TemplateInfo.FormattedModelValue)